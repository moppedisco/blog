<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Flexbox test</title>
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<link rel="stylesheet" href="main.css">

<script src="js/libs/modernizr-2.0.6.min.js"></script>
</head>
<body>
<div class="wrapper">
	<div class="flex-container flex-container-parent">
		<div class="flex-item offset-left-2">
			<div class="flex-container tab-content group1">
				<div class="flex-item relative"  data-direction="left" data-tab-index="0">
					<h1><span>Chinatown</span></h1>
				</div>
				<div class="flex-item relative" data-direction="left" data-tab-index="1">
					<h1><span>Brooklyn</span></h1>
				</div>	
				<div class="flex-item relative" data-direction="left" data-tab-index="2">
					<h1><span>Manhattan</span></h1>
				</div>
				<div class="flex-item relative" data-direction="left" data-tab-index="3">
					<h1><span>East Village</span></h1>
				</div>
			</div>
			<div class="flex-container tab-content group2">
				<div class="flex-item relative"  data-direction="left" data-tab-index="0">
					<h1><span>Bellevue</span></h1>
				</div>
				<div class="flex-item relative" data-direction="left" data-tab-index="1">
					<h1><span>Seefeld</span></h1>
				</div>	
				<div class="flex-item relative" data-direction="left" data-tab-index="2">
					<h1><span>wiedikon</span></h1>
				</div>
			</div>			
		</div>
		<div class="flex-item offset-left-1">
			<div class="flex-container">
				<div class="flex-item relative" role="button" data-href='group1' data-direction="left">
					<h1><span>New York</span></h1>
				</div>
				<div class="flex-item relative" role="button" data-href="group2" data-direction="left">
					<h1><span>Zurich</span></h1>
				</div>			
			</div>
		</div>
		<div class="flex-item relative" role="button" data-direction="left">
			<h1><span>Cities</span></h1>
		</div>
		<div class="flex-item relative" role="button" data-direction="right">
			<h1><span>News</span></h1>
		</div>
		<div class="flex-item offset-right-1" role="button">
			<div class="flex-container">
				<div class="flex-item relative" role="button">
					<h1><span>NY Times</span></h1>
				</div>
				<div class="flex-item relative" role="button">
					<h1><span>The Guardian</span></h1>
				</div>			
				<div class="flex-item relative" role="button">
					<h1><span>The Sun</span></h1>
				</div>
				<div class="flex-item relative" role="button">
					<h1><span>Aftonbladet</span></h1>
				</div>				
			</div>
		</div>	
	</div>
</div>
<!-- Scripts -->  
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="fastClick.js"></script>
<script type="text/javascript">

$(document).ready(function() {
    var bodyheight = $(window).height();
    var bodywidth = $(window).width();
    $(".flex-container").height(bodyheight);
});

// for the window resize
$(window).resize(function() {
    var bodyheight = $(window).height();
    $(".flex-container").height(bodyheight);
});

$(document).ready(function() {
	var distance = 0;
	FastClick.attach(document.body);
    $("div[role=button]").on('click',function(){
    	var self = $(this);
    	$(this).siblings().addClass("sibling");

    	if(self.hasClass("sibling")){
    		var href = $(this).attr("data-href");
			$(".tab-content").hide();
			$("."+href).show();
			$(this).removeClass("sibling").siblings().addClass("sibling");
			$(this).addClass("inverse");
			$(this).siblings().removeClass("inverse");
    		return false
    	}

		if(self.hasClass("inverse")){
			$(this).siblings().removeClass("sibling");
			if($(this).attr("data-direction") === "left"){
				distance = distance - 50;
			} else if($(this).attr("data-direction") === "right"){
				distance = distance + 50;
			}

			$(".wrapper").animate({
				left: distance+"%"
			});

			self.removeClass("inverse");

			return false;
		} 

		if($(this).attr("data-direction") === "left"){
			distance = distance + 50;

			$(".wrapper").animate({
				left: distance+"%"
			});

			self.addClass("inverse");
		}

		if($(this).attr("data-direction") === "right"){
			distance = distance - 50;

			$(".wrapper").animate({
				left: distance+"%"
			});

			self.addClass("inverse");
		}


		if($(this).attr("data-href")){
			var href = $(this).attr("data-href");
			$(".tab-content").hide();
			$("."+href).show();
		}
    })
});


</script>
</body>
</html>
